function putOr(e){return"true"==e?"DELETE":"false"==e?"PUT":void 0}$(document).ready(function(){$("form#device").submit(function(e){var r=$(this).serializeArray(),a=e.originalEvent.explicitOriginalTarget.id;if("rent"==a){var t=null;$.get(domain+"device",function(e,r){t=e.data,r=e.success,r||errorMsg("Error retrieving devices from the server.")}),$.ajax({url:domain+"device/"+r[0].value+"/loan/"+sessionStorage.user_id,type:"PUT",cache:!1,success:function(e,a,o){for(var i=0;i<t.length;i++)t[i].id==r[0].value&&("null"==sessionStorage.device_loaned?sessionStorage.device_loaned=t[i].type+":"+r[0].value:sessionStorage.device_loaned+="#"+t[i].type+":"+r[0].value);$("table.available-devices tbody").empty(),statusMsg("Rented device"),getDevices(),$("form#returnD").fadeIn()},error:function(e,r,a){var t=JSON.parse(e.responseText);1===t.error?errorMsg("You do not have the privilege to rent that device."):2===t.error?errorMsg("The device is already being loaned by another user."):3===t.error?errorMsg("The device you trying to loan is already reserved and you are not in any of the classes of the reservation."):errorMsg("There is an error renting this device. Please try again or contact your system administrator.")}})}else"active"==a?$.ajax({url:domain+"device/"+r[0].value+"/active",type:putOr(r[1].value),cache:!1,success:function(e,r,a){location.reload()},error:function(e,r,a){var t=JSON.parse(e.responseText);errorMsg(t)}}):"delete"==a&&$.ajax({url:domain+"device/"+r[0].value,type:"DELETE",cache:!1,success:function(e,r,a){statusMsg("Device deleted!"),$(".available-devices tbody").empty(),getDevices()},error:function(e,r,a){var t=JSON.parse(e.responseText);errorMsg(t)}});e.preventDefault()})});