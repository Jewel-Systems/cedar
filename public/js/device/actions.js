function putOr(e){return"true"==e?"DELETE":"false"==e?"PUT":void 0}$(document).ready(function(){$("input[type=submit]").click(function(e){$("input[type=submit]",$(this).parents("form#device")).removeAttr("clicked"),$(this).attr("clicked","true")}),$("form#device").submit(function(e){var r=$(this).serializeArray(),t=$("input[type=submit][clicked=true]").attr("id");if(console.log(t),"rent"==t){var a=null;$.get(domain+"device",function(e,r){a=e.data,r=e.success,r||errorMsg("Error retrieving devices from the server.")}),$.ajax({url:domain+"device/"+r[0].value+"/loan/"+sessionStorage.user_id,type:"PUT",cache:!1,success:function(e,t,i){for(var o=0;o<a.length;o++)a[o].id==r[0].value&&("null"==sessionStorage.device_loaned?sessionStorage.device_loaned=a[o].type+":"+r[0].value:sessionStorage.device_loaned+="#"+a[o].type+":"+r[0].value);$("table.available-devices tbody").empty(),statusMsg("Rented device"),getDevices(),$("form#returnD").fadeIn()},error:function(e,r,t){var a=JSON.parse(e.responseText);1===a.error?errorMsg("You do not have the privilege to rent that device."):2===a.error?errorMsg("The device is already being loaned by another user."):3===a.error?errorMsg("The device you trying to loan is already reserved and you are not in any of the classes of the reservation."):errorMsg("There is an error renting this device. Please try again or contact your system administrator.")}})}else"active"==t?$.ajax({url:domain+"device/"+r[0].value+"/active",type:putOr(r[1].value),cache:!1,success:function(e,r,t){location.reload()},error:function(e,r,t){var a=JSON.parse(e.responseText);errorMsg(a)}}):"delete"==t&&$.ajax({url:domain+"device/"+r[0].value,type:"DELETE",cache:!1,success:function(e,r,t){statusMsg("Device deleted!"),$(".available-devices tbody").empty(),getDevices()},error:function(e,r,t){var a=JSON.parse(e.responseText);errorMsg(a)}});e.preventDefault()})});