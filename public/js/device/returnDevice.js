function returnDevice(e,r){for(var t=sessionStorage.user_type,s=sessionStorage.device_loaned.split("#"),n=null,o=0;o<s.length;o++)s[o].search(e)===-1&&(null===n?n=s[o]:n+="#"+s[o]);$.ajax({url:domain+"device/"+e+"/loan/"+r,type:"DELETE",cache:!1,success:function(e,r,s){sessionStorage.device_loaned=n,"admin"==t&&$("div#returnDevice.modal").modal("toggle"),$(".available-devices tbody").empty(),statusMsg("Device Returned"),getDevices()},error:function(e,r,t){var s=JSON.parse(e.responseText);errorMsg(s.error)}})}$(document).ready(function(){$("form#returnADevice").submit(function(e){var r=$(this).serializeArray();returnDevice(r[1].value,r[0].value),e.preventDefault()}),$("form#returnD").submit(function(e){var r=sessionStorage.device_loaned.split("#"),t=null;if("student"==sessionStorage.user_type)if(1===r.length)t=r[0].split(":"),returnDevice(t[1],sessionStorage.user_id);else{var s=prompt("Are you returning your mac or camera?","");if(null!==s)for(var n=0;n<r.length;n++)t=r[n].split(":"),t[0]==s&&returnDevice(t[1],sessionStorage.user_id)}else if("teacher"==sessionStorage.user_type){var o=prompt("Enter the ID of the device you want to return:");null!==o?returnDevice(o,sessionStorage.user_id):errorMsg("No ID entered.")}e.preventDefault()})});